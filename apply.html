<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Job Application</title>
    <link rel="stylesheet" type="text/css" href="css/bootstrap.css" />
    <link href="css/style.css" rel="stylesheet" />
    <style>
        .preview-container {
            max-height: 200px;
            overflow-y: auto;
        }
    </style>
</head>
<body>
    <div class="container mt-5">
        <div id="jobDetails" class="card mb-4">
            <!-- Job details will be dynamically inserted here -->
        </div>
        
        <form id="applicationForm" class="needs-validation" novalidate>
            <div class="row">
                <div class="col-md-6">
                    <div class="form-group">
                        <label for="name">Full Name *</label>
                        <input type="text" class="form-control" id="name" required>
                        <div class="invalid-feedback">Please enter your full name.</div>
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="form-group">
                        <label for="email">Email *</label>
                        <input type="email" class="form-control" id="email" required>
                        <div class="invalid-feedback">Please enter a valid email address.</div>
                    </div>
                </div>
            </div>

            <div class="row">
                <div class="col-md-6">
                    <div class="form-group">
                        <label for="phone">Phone Number *</label>
                        <input type="tel" class="form-control" id="phone" pattern="[0-9]{10}" required>
                        <div class="invalid-feedback">Please enter a 10-digit phone number.</div>
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="form-group">
                        <label for="education">Highest Education *</label>
                        <select class="form-control" id="education" required>
                            <option value="">Select Education Level</option>
                            <option>High School</option>
                            <option>Associate Degree</option>
                            <option>Bachelor's Degree</option>
                            <option>Master's Degree</option>
                            <option>PhD</option>
                        </select>
                        <div class="invalid-feedback">Please select your education level.</div>
                    </div>
                </div>
            </div>

            <div class="form-group">
                <label for="resume">Resume/CV *</label>
                <input type="file" class="form-control-file" id="resume" accept=".pdf,.doc,.docx" required>
                <div id="resumePreview" class="preview-container mt-2"></div>
            </div>

            <div class="form-group">
                <label for="coverLetter">Cover Letter *</label>
                <textarea class="form-control" id="coverLetter" rows="4" required></textarea>
                <div class="invalid-feedback">Please write a cover letter.</div>
            </div>

            <div class="form-group">
                <label>Additional Skills (Optional)</label>
                <div id="skillsContainer">
                    <div class="input-group mb-2">
                        <input type="text" class="form-control skill-input" placeholder="Enter a skill">
                        <div class="input-group-append">
                            <button class="btn btn-outline-secondary add-skill" type="button">Add</button>
                        </div>
                    </div>
                </div>
                <div id="selectedSkills" class="mt-2"></div>
            </div>

            <button type="submit" class="btn btn-primary btn-lg btn-block">Submit Application</button>
        </form>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const urlParams = new URLSearchParams(window.location.search);
            const jobId = urlParams.get('jobId');
            
            if (!jobId) {
                alert('No job selected');
                return;
            }

            const jobListings = JSON.parse(localStorage.getItem('jobPostings')) || [];
            const selectedJob = jobListings.find(job => job.id == jobId);

            if (!selectedJob) {
                alert('Job not found');
                return;
            }

            // Display job details
            document.getElementById('jobDetails').innerHTML = `
                <div class="card-body">
                    <h2 class="card-title">${selectedJob.title}</h2>
                    <h4 class="card-subtitle mb-2 text-muted">${selectedJob.company}</h4>
                    <p class="card-text">${selectedJob.description}</p>
                    <p><strong>Requirements:</strong> ${selectedJob.requirements}</p>
                </div>
            `;

            // Resume file preview
            document.getElementById('resume').addEventListener('change', function(e) {
                const file = e.target.files[0];
                const previewDiv = document.getElementById('resumePreview');
                
                if (file) {
                    previewDiv.innerHTML = `
                        <div class="alert alert-info">
                            File: ${file.name}<br>
                            Size: ${(file.size / 1024).toFixed(2)} KB
                        </div>
                    `;
                }
            });

            // Dynamic skills addition
            const addSkillBtn = document.querySelector('.add-skill');
            const skillInput = document.querySelector('.skill-input');
            const selectedSkillsDiv = document.getElementById('selectedSkills');

            addSkillBtn.addEventListener('click', () => {
                const skill = skillInput.value.trim();
                if (skill) {
                    const skillTag = document.createElement('span');
                    skillTag.className = 'badge badge-primary mr-2 mb-2';
                    skillTag.innerHTML = `${skill} <span class="remove-skill" style="cursor:pointer;">&times;</span>`;
                    
                    skillTag.querySelector('.remove-skill').addEventListener('click', () => {
                        skillTag.remove();
                    });

                    selectedSkillsDiv.appendChild(skillTag);
                    skillInput.value = '';
                }
            });

            // Form validation
            (function() {
                'use strict';
                window.addEventListener('load', function() {
                    var forms = document.getElementsByClassName('needs-validation');
                    var validation = Array.prototype.filter.call(forms, function(form) {
                        form.addEventListener('submit', function(event) {
                            if (form.checkValidity() === false) {
                                event.preventDefault();
                                event.stopPropagation();
                            }
                            form.classList.add('was-validated');
                        }, false);
                    });
                }, false);
            })();

            // Handle application submission
            document.getElementById('applicationForm').addEventListener('submit', (e) => {
                e.preventDefault();
                
                // Collect skills
                const skills = Array.from(selectedSkillsDiv.children)
                    .map(skill => skill.textContent.replace('Ã—', '').trim());

                const application = {
                    jobId: selectedJob.id,
                    jobTitle: selectedJob.title,
                    name: document.getElementById('name').value,
                    email: document.getElementById('email').value,
                    phone: document.getElementById('phone').value,
                    education: document.getElementById('education').value,
                    skills: skills,
                    coverLetter: document.getElementById('coverLetter').value,
                    submittedAt: new Date().toLocaleString()
                };

                let applications = JSON.parse(localStorage.getItem('jobApplications')) || [];
                applications.push(application);
                localStorage.setItem('jobApplications', JSON.stringify(applications));

                alert('Application submitted successfully!');
                window.location.href = 'job_listings.php';
            });
        });
    </script>
</body>
</html>
Last edited just now